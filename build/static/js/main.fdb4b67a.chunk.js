(this.webpackJsonpsimien=this.webpackJsonpsimien||[]).push([[0],{130:function(e,t,a){e.exports=a(272)},271:function(e,t,a){},272:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(57),c=a.n(i),u=a(3),s=a.n(u),l=a(6),o=a(7),m=a(8),h=a(11),p=a(10),d=a(9),f=a(27),E=a(12),b=a(19),y=a(85),v=function(){function e(t){Object(o.a)(this,e),this.headers={Accept:"application/json","Content-Type":"application/json"},this.BASE_URL="https://backend.simienpark.org/api/v1",this.authToken=t}return Object(m.a)(e,[{key:"createHeaders",value:function(){return console.log(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_OKTA:"0oaengsigmP3OjAUL4x6",REACT_APP_PROXY:"https://backend.simienpark.org/api/v1"})),this.authToken?Object(y.a)(Object(y.a)({},this.headers),{},{Authorization:"Bearer "+this.authToken}):this.headers}},{key:"getAllGuides",value:function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.BASE_URL+"/guides",{method:"GET",headers:this.createHeaders()});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getGuideById",value:function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.BASE_URL+"/guides","/").concat(t),{method:"GET",headers:this.createHeaders()});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteGuide",value:function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.BASE_URL+"/guides","/").concat(t),{method:"DELETE",headers:this.createHeaders()});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateGuide",value:function(){var e=Object(l.a)(s.a.mark((function e(t,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("item ID: "+a),e.next=3,fetch("".concat(this.BASE_URL+"/guides","/").concat(a),{method:"PUT",headers:this.createHeaders(),body:t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"createGuide",value:function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.BASE_URL+"/guides"),{method:"POST",headers:this.createHeaders(),body:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllTourInquiries",value:function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.BASE_URL+"/tour-inquiries",{method:"GET",headers:this.createHeaders()});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTourInquiryById",value:function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.BASE_URL+"/tour-inquiries","/").concat(t),{method:"GET",headers:this.createHeaders()});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteTourInquiry",value:function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.BASE_URL+"/tour-inquiries","/").concat(t),{method:"DELETE",headers:this.createHeaders()});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateTourInquiry",value:function(){var e=Object(l.a)(s.a.mark((function e(t,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("item ID: "+a),e.next=3,fetch("".concat(this.BASE_URL+"/tour-inquiries","/").concat(a),{method:"PUT",headers:this.createHeaders(),body:t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"createTourInquiry",value:function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.BASE_URL+"/bookings"),{method:"POST",headers:this.createHeaders(),body:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllPaymentRequests",value:function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.BASE_URL+"/payment-requests",{method:"GET",headers:this.createHeaders()});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createPaymentRequest",value:function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.BASE_URL+"/payment-requests"),{method:"POST",headers:this.createHeaders(),body:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDepositAmountByInquiryId",value:function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.BASE_URL+"/getdepositamount","/").concat(t),{method:"GET",headers:this.createHeaders()});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createPayment",value:function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.BASE_URL+"/makepayment"),{method:"POST",headers:this.createHeaders(),body:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),g=a(278),k=a(277),O=a(129),j=a(274),C=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={isOpen:!1},n.toggle=n.toggle.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){var e=this.props,t=e.isAuthenticated,a=e.login,n=e.logout;return r.a.createElement(g.a,{color:"light",expand:"md"},r.a.createElement(g.a.Brand,{tag:E.Link,to:"/"},"Home"),t?r.a.createElement("span",null,r.a.createElement(g.a.Brand,{href:"/guides"},"All guides"),r.a.createElement(g.a.Brand,{href:"/tour-inquiries"},"Tour inquiries")):r.a.createElement("span",null),r.a.createElement(g.a.Toggle,{onClick:this.toggle}),r.a.createElement(g.a.Collapse,null,r.a.createElement(k.a,{className:"ml-auto"},t?r.a.createElement(O.a,null,r.a.createElement(j.a,{color:"secondary",onClick:n},"Logout")):r.a.createElement(O.a,null,r.a.createElement(j.a,{color:"secondary",onClick:a},"Login")))))}}]),a}(n.Component),S=(a(271),a(275)),w=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.login;return null===this.props.authenticated?r.a.createElement("p",null,"Loading..."):r.a.createElement("div",{className:"app"},this.props.navbar,r.a.createElement(S.a,{fluid:!0},this.props.authenticated?r.a.createElement("div",null,r.a.createElement("p",null,"Welcome, ",this.props.user.name),r.a.createElement(j.a,{color:"secondary"},r.a.createElement(E.Link,{className:"app-link",to:"/guides"},"Manage Simienpark database"))):r.a.createElement("div",null,r.a.createElement("p",null,"Please log in to manage Simienpark database."),r.a.createElement(j.a,{color:"secondary",onClick:e},"Login to Simienpark tours"))))}}]),a}(n.Component),x=a(31),q=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={data:[]},e.handleClick=e.handleClick.bind(Object(h.a)(e)),e}return Object(m.a)(a,[{key:"fetchGuides",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetching guides"),e.next=3,this.props.api.getAllGuides();case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,console.log(a),this.setState({data:a});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.fetchGuides()}},{key:"handleClick",value:function(e){var t=this;console.log("deleting "+e),this.props.api.deleteGuide(e).then((function(){console.log("calling fetch"),t.fetchGuides()}))}},{key:"handleClickEdit",value:function(e){console.log("editing "+e),this.props.history.push("guides/edit")}},{key:"render",value:function(){var e=this;console.log("rendering");var t=this.state.data.map((function(t,a){var n="/guides/"+t.id;return r.a.createElement("tr",{key:a},r.a.createElement("td",null,r.a.createElement(E.Link,{to:n},t.name)),r.a.createElement("td",null,t.email),r.a.createElement("td",null,t.phone),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){e.handleClick(t.id)}},"Delete")),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){e.props.history.push("guides/edit/"+t.id)}},"Edit")))}));return r.a.createElement("div",null,this.props.navbar,r.a.createElement(x.a,{responsive:!0,striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"E-mail"),r.a.createElement("th",null,"Phone number"),r.a.createElement("th",null,"#"),r.a.createElement("th",null,"#"))),r.a.createElement("tbody",null,t)))}}]),a}(n.Component),L=Object(f.o)(q),I=a(276),T=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={},e.handleSubmit=e.handleSubmit.bind(Object(h.a)(e)),e}return Object(m.a)(a,[{key:"handleSubmit",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(t.target),a=JSON.stringify({name:t.target.name.value,nickname:t.target.nickname.value,password:t.target.password.value,english:this.state.englishChecked,french:this.state.frenchChecked,email:t.target.email.value,phone:t.target.phone.value}),e.next=5,this.props.api.createGuide(a);case 5:e.sent,this.props.history.push("/");case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.setState({frenchChecked:!1,englishChecked:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.props.navbar,r.a.createElement(I.a,{onSubmit:this.handleSubmit},r.a.createElement("h3",null,"Register as a guide:"),r.a.createElement("br",null),r.a.createElement(I.a.Group,{controlid:"formAddGuide"},r.a.createElement(I.a.Label,null,"Enter your name (required):"),r.a.createElement(I.a.Control,{size:"sm",name:"name",placeholder:"Enter your name"}),r.a.createElement(I.a.Label,null,"Enter your nickname (required):"),r.a.createElement(I.a.Control,{size:"sm",name:"nickname",placeholder:"Enter your nickname"}),r.a.createElement(I.a.Label,null,"Create your password (required):"),r.a.createElement(I.a.Control,{size:"sm",name:"password",placeholder:"Enter your password"}),r.a.createElement(I.a.Label,null,"Enter your e-mail (required):"),r.a.createElement(I.a.Control,{size:"sm",type:"email",name:"email"}),r.a.createElement(I.a.Label,null,"Enter your phone nimber (required):"),r.a.createElement(I.a.Control,{size:"sm",name:"phone"}),r.a.createElement(I.a.Group,{controlId:"formBasicCheckbox"},r.a.createElement(I.a.Check,{type:"checkbox",name:"english",label:"Yes, I speak English",defaultChecked:this.state.englishChecked,onClick:function(){return e.setState({englishChecked:!e.state.englishChecked})}}),r.a.createElement(I.a.Check,{type:"checkbox",name:"french",label:"Oui, je parle Fran\xe7ais",defaultChecked:this.state.frenchChecked,onClick:function(){return e.setState({frenchChecked:!e.state.frenchChecked})}})),r.a.createElement(j.a,{variant:"primary",type:"submit"},"OK"))))}}]),a}(n.Component),_=Object(f.o)(T),A=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={data:[]},e.handleSubmit=e.handleSubmit.bind(Object(h.a)(e)),e}return Object(m.a)(a,[{key:"fetchGetGuideById",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.getGuideById(this.props.match.params.id);case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,console.log(a),this.setState({data:a,frenchChecked:a.french,englishChecked:a.english});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var a,n,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(t.target.french),a=JSON.stringify({name:t.target.name.value,nickname:t.target.nickname.value,password:t.target.password.value,english:this.state.englishChecked,french:this.state.frenchChecked,email:t.target.email.value,phone:t.target.phone.value}),n=Number(this.props.match.params.id),e.next=6,this.props.api.updateGuide(a,n);case 6:return r=e.sent,e.next=9,r.json();case 9:i=e.sent,this.setState({data:i}),this.props.history.push("/");case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.fetchGetGuideById()}},{key:"render",value:function(){var e=this,t=this.state.data;return console.log("value of english "+this.state.englishChecked),t?r.a.createElement("div",null,this.props.navbar,r.a.createElement(I.a,{onSubmit:this.handleSubmit},r.a.createElement("h3",null,"Edit your profile:"),r.a.createElement("br",null),r.a.createElement(I.a.Group,{controlId:"formAddGuide"},r.a.createElement(I.a.Label,null,"Name:"),r.a.createElement(I.a.Control,{size:"sm",name:"name",defaultValue:t.name}),r.a.createElement(I.a.Label,null,"Nickname:"),r.a.createElement(I.a.Control,{size:"sm",name:"nickname",defaultValue:t.nickname}),r.a.createElement(I.a.Label,null,"Enter your password:"),r.a.createElement(I.a.Control,{size:"sm",name:"password",defaultValue:""}),r.a.createElement(I.a.Label,null,"Enter your e-mail (required):"),r.a.createElement(I.a.Control,{size:"sm",name:"email",type:"email",defaultValue:t.email}),r.a.createElement(I.a.Label,null,"Enter your phone number (required):"),r.a.createElement(I.a.Control,{size:"sm",name:"phone",defaultValue:t.phone}),r.a.createElement(I.a.Group,{controlId:"formBasicCheckbox"},r.a.createElement(I.a.Check,{type:"checkbox",name:"english",label:"Yes, I speak English",defaultChecked:this.state.englishChecked,onClick:function(){return e.setState({englishChecked:!e.state.englishChecked})}}),r.a.createElement(I.a.Check,{onClick:function(){return e.setState({frenchChecked:!e.state.frenchChecked})},type:"checkbox",name:"french",label:"Oui, je parle Fran\xe7ais",defaultChecked:this.state.frenchChecked})),r.a.createElement(j.a,{variant:"primary",type:"submit"},"SAVE CHANGES"))),"  "):r.a.createElement("p",null," Loading... ")}}]),a}(n.Component),D=Object(f.o)(A),B=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={data:[]},e.handleClick=e.handleClick.bind(Object(h.a)(e)),e}return Object(m.a)(a,[{key:"fetchTourInquiries",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetching tour inquiries"),e.next=3,this.props.api.getAllTourInquiries();case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,console.log(a),this.setState({data:a});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.fetchTourInquiries()}},{key:"handleClick",value:function(e){var t=this;console.log("deleting "+e),this.props.api.deleteTourInquiry(e).then((function(){console.log("calling fetch"),t.fetchTourInquiries()}))}},{key:"handleClickEdit",value:function(e){console.log("editing "+e),this.props.history.push("tour-inquiries/edit")}},{key:"render",value:function(){var e=this;console.log("rendering");var t=this.state.data.map((function(t,a){var n="/tour-inquiries/"+t.id;return r.a.createElement("tr",{key:a},r.a.createElement("td",null,r.a.createElement(E.Link,{to:n},t.name," ",t.surname)),r.a.createElement("td",null,t.email),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){e.handleClick(t.id)}},"Delete")),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){e.props.history.push("tour-inquiries/edit/"+t.id)}},"Edit")),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){e.props.history.push("/payment-requests/"+t.id)}},"Request payment")))}));return r.a.createElement("div",null,this.props.navbar,r.a.createElement(x.a,{responsive:!0,striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"E-mail"),r.a.createElement("th",null,"#"),r.a.createElement("th",null,"#"),r.a.createElement("th",null,"#"))),r.a.createElement("tbody",null,t)))}}]),a}(n.Component),G=Object(f.o)(B),R=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={data:[]},e.handleSubmit=e.handleSubmit.bind(Object(h.a)(e)),e}return Object(m.a)(a,[{key:"fetchGetTourInquiryById",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.getTourInquiryById(this.props.match.params.id);case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,console.log(a),this.setState({data:a});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var a,n,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=JSON.stringify({name:t.target.name.value,surname:t.target.surname.value,email:t.target.email.value,days:t.target.days.value,persons:t.target.persons.value,date:t.target.date.value,message:t.target.message.value}),n=Number(this.props.match.params.id),e.next=5,this.props.api.updateTourInquiry(a,n);case 5:return r=e.sent,e.next=8,r.json();case 8:i=e.sent,this.setState({data:i}),this.props.history.push("/");case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.fetchGetTourInquiryById()}},{key:"render",value:function(){var e=this.state.data;return e?(console.log("single tour inquiry data = "+JSON.stringify(e)),r.a.createElement("div",null,this.props.navbar,r.a.createElement(I.a,{onSubmit:this.handleSubmit},r.a.createElement("h3",null,"Edit tour inquiry:"),r.a.createElement("br",null),r.a.createElement(I.a.Label,null,"Name:"),r.a.createElement(I.a.Control,{size:"sm",name:"name",defaultValue:e.name}),r.a.createElement(I.a.Label,null,"Surname:"),r.a.createElement(I.a.Control,{size:"sm",name:"surname",defaultValue:e.surname}),r.a.createElement(I.a.Label,null,"Tourist's e-mail:"),r.a.createElement(I.a.Control,{size:"sm",type:"email",name:"email",defaultValue:e.email}),r.a.createElement(I.a.Label,null,"How many days do you want to trek?"),r.a.createElement(I.a.Control,{size:"sm",name:"days",defaultValue:e.days}),r.a.createElement(I.a.Label,null,"How many persons are in your group?"),r.a.createElement(I.a.Control,{size:"sm",name:"persons",defaultValue:e.persons}),r.a.createElement(I.a.Label,null,"Date you want to start the tour:"),r.a.createElement(I.a.Control,{size:"sm",name:"date",placeholder:"Enter the start date",defaultValue:e.date}),r.a.createElement(I.a.Label,null,"Your message:"),r.a.createElement(I.a.Control,{size:"sm",name:"message",as:"textarea",rows:"3",defaultValue:e.message}),r.a.createElement(j.a,{variant:"primary",type:"submit"},"Edit tour details")))):r.a.createElement("p",null," Loading... ")}}]),a}(n.Component),P=Object(f.o)(R),z=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={data:[]},e.handleSubmit=e.handleSubmit.bind(Object(h.a)(e)),e}return Object(m.a)(a,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),console.log(e.target),this.refs.btn.setAttribute("disabled","disabled"),fetch("http://localhost:8080/api/v1/bookings",{method:"POST",body:JSON.stringify({name:e.target.name.value,surname:e.target.surname.value,email:e.target.email.value,days:e.target.days.value,persons:e.target.persons.value,date:e.target.date.value,message:e.target.message.value}),headers:{"Content-Type":"application/json"}}).then((function(){return t.props.history.push("/success")}))}},{key:"render",value:function(){return this.state.data?r.a.createElement(I.a,{onSubmit:this.handleSubmit},r.a.createElement(I.a.Group,{controlid:"formBooking"},r.a.createElement("h2",null,"Guided Tours"),r.a.createElement("h6",null,"If you want a guided tour in the Simien Mountains including professional guide and 4wd transportation, use the contact form below:"),r.a.createElement("br",null),r.a.createElement(I.a.Label,null,"Your name (required):"),r.a.createElement(I.a.Control,{size:"sm",name:"name",placeholder:"Enter your name"}),r.a.createElement(I.a.Label,null,"Your surname (required):"),r.a.createElement(I.a.Control,{size:"sm",name:"surname",placeholder:"Enter your surname"}),r.a.createElement(I.a.Label,null,"Your e-mail (required):"),r.a.createElement(I.a.Control,{size:"sm",type:"email",name:"email",placeholder:"Enter your e-mail"})),r.a.createElement(I.a.Group,{controlId:"bookingForm.ControlSelectDays"},r.a.createElement(I.a.Label,null,"How many days do you want to trek?"),r.a.createElement(I.a.Control,{size:"sm",name:"days",as:"select"},r.a.createElement("option",null,"1"),r.a.createElement("option",null,"2"),r.a.createElement("option",null,"3"),r.a.createElement("option",null,"4"),r.a.createElement("option",null,"5"),r.a.createElement("option",null,"6"),r.a.createElement("option",null,"7"),r.a.createElement("option",null,"8"),r.a.createElement("option",null,"9"),r.a.createElement("option",null,"10"),r.a.createElement("option",null,"11"),r.a.createElement("option",null,"12"),r.a.createElement("option",null,"13"),r.a.createElement("option",null,"14"),r.a.createElement("option",null,"15"))),r.a.createElement(I.a.Group,{controlId:"bookingForm.ControlSelectPersons"},r.a.createElement(I.a.Label,null,"How many persons are in your group?"),r.a.createElement(I.a.Control,{size:"sm",name:"persons",as:"select"},r.a.createElement("option",null,"1"),r.a.createElement("option",null,"2"),r.a.createElement("option",null,"3"),r.a.createElement("option",null,"4"),r.a.createElement("option",null,"5"),r.a.createElement("option",null,"6"),r.a.createElement("option",null,"7"),r.a.createElement("option",null,"8"),r.a.createElement("option",null,"9"),r.a.createElement("option",null,"10"),r.a.createElement("option",null,"11"),r.a.createElement("option",null,"12"),r.a.createElement("option",null,"13"),r.a.createElement("option",null,"14"),r.a.createElement("option",null,"15"))),r.a.createElement(I.a.Group,{controlId:"formBasicBookingDate"},r.a.createElement(I.a.Label,null,"Date you want to start the tour:"),r.a.createElement(I.a.Control,{size:"sm",type:"date",name:"date",placeholder:"Enter the start date"})),r.a.createElement(I.a.Group,{controlId:"bookingForm.ControlTextareaMessage"},r.a.createElement(I.a.Label,null,"Your message:"),r.a.createElement(I.a.Control,{size:"sm",name:"message",as:"textarea",rows:"3"})),r.a.createElement(j.a,{ref:"btn",variant:"primary",type:"submit"},"SEND")):r.a.createElement("p",null," Loading... ")}}]),a}(n.Component),H=(n.Component,function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={data:[]},e.handleSubmit=e.handleSubmit.bind(Object(h.a)(e)),e}return Object(m.a)(a,[{key:"fetchGetTourInquiryById",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.getTourInquiryById(this.props.match.params.id);case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,console.log(a),this.setState({data:a});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=JSON.stringify({inquiryId:this.props.match.params.id,deposit:t.target.deposit.value,mailText:t.target.message.value,clientMail:t.target.email.value,requestDate:new Date}),e.next=4,this.props.api.createPaymentRequest(a);case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,this.setState({data:r});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.fetchGetTourInquiryById()}},{key:"render",value:function(){var e=this.state.data;if(console.log("payment request data = "+e),e&&e.name){var t="Dear "+e.name+", \n\n Please pay the deposit using this link: https://reservation.simienpark.org/payments/"+e.id+"\n _________________________________\n Tour details: \n Tourist: "+e.name+" "+e.surname+" \n Tour lasts: "+e.days+" days \n Tour starts: "+e.date.substr(0,10)+" \n How many persons: "+e.persons+" \n Additional information: "+e.message+"\n \n If you have any questions, feel free to contact us by replying to this email.\n -----\n Best Regards, \n Simien Mountains National Park team";return console.log(t),r.a.createElement(I.a,{onSubmit:this.handleSubmit},r.a.createElement("h5",null,"Send a bill for the tourist: ",e.name," ",e.surname),r.a.createElement("br",null),r.a.createElement(I.a.Group,{controlId:"formPaymentRequest"},r.a.createElement(I.a.Label,null,"Tourist's e-mail:"),r.a.createElement(I.a.Control,{size:"sm",name:"email",type:"email",defaultValue:e.email}),r.a.createElement(I.a.Label,null,"Enter total price:"),r.a.createElement(I.a.Control,{size:"sm",name:"totalPrice",placeholder:"Enter total price"}),r.a.createElement(I.a.Label,null,"Deposit to pay:"),r.a.createElement(I.a.Control,{size:"sm",name:"deposit",placeholder:"10 percents from total price"}),r.a.createElement(I.a.Label,null,"Message for tourist:"),r.a.createElement(I.a.Control,{size:"sm",name:"message",as:"textarea",rows:"15",defaultValue:t}),r.a.createElement(j.a,{variant:"primary",type:"submit"},"SEND payment request")))}return r.a.createElement("p",null," Loading... ")}}]),a}(n.Component)),N=Object(f.o)(H),U=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={data:[]},e}return Object(m.a)(a,[{key:"fetchPaymentRequests",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetching payment requests"),e.next=3,this.props.api.getAllPaymentRequests();case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,console.log(a),this.setState({data:a});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.fetchPaymentRequests()}},{key:"render",value:function(){console.log("rendering");var e=this.state.data.map((function(e,t){var a="/paymentRequests/"+e.id;return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement(E.Link,{to:a},e.inquiryId)),r.a.createElement("td",null,e.mailText),r.a.createElement("td",null,e.requestDate),r.a.createElement("td",null,e.clientMail))}));return r.a.createElement("div",null,this.props.navbar,r.a.createElement(x.a,{responsive:!0,striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Inquiry ID"),r.a.createElement("th",null,"Mail text"),r.a.createElement("th",null,"Requerst date"),r.a.createElement("th",null,"Client's mail"))),r.a.createElement("tbody",null,e)))}}]),a}(n.Component),M=(Object(f.o)(U),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={data:[]},e.handleSubmit=e.handleSubmit.bind(Object(h.a)(e)),e}return Object(m.a)(a,[{key:"fetchGetDepositAmountByInquiryId",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.getDepositAmountByInquiryId(this.props.match.params.inquiryId);case 2:return t=e.sent,e.next=5,t.text();case 5:a=e.sent,console.log(a),this.setState({data:a});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(t.target),a=JSON.stringify({inquiryId:this.props.match.params.inquiryId,payment:t.target.deposit.value,paymentDate:new Date}),e.next=5,this.props.api.createPayment(a);case 5:return n=e.sent,e.next=8,n.text();case 8:r=e.sent,console.log(r),this.setState({data:r}),window.location.replace(r);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.fetchGetDepositAmountByInquiryId()}},{key:"render",value:function(){var e=this.state.data;return e?(console.log("pay data = "+e),r.a.createElement(I.a,{onSubmit:this.handleSubmit},r.a.createElement("h3",null,"Hello, please pay this deposit to book your tour:"),r.a.createElement("br",null),r.a.createElement(I.a.Group,{controlId:"formPay"},r.a.createElement(I.a.Label,null,"Deposit, EUR:"),r.a.createElement(I.a.Control,{size:"sm",type:"number",name:"deposit",defaultValue:e}),r.a.createElement(j.a,{variant:"primary",type:"submit"},"Pay")))):r.a.createElement("p",null," Loading... ")}}]),a}(n.Component)),V=Object(f.o)(M),J=a(32),Y=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(J.a,{variant:"success"},r.a.createElement(J.a.Heading,null,"Thank you for your payment."),r.a.createElement("p",{className:"mb-0"},"All the guide's contacts will be send to your mail within 24 hours. See you soon in Ethiopia!"))}}]),a}(n.Component),W=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(J.a,{variant:"danger"},r.a.createElement("p",{className:"mb-0"},"Something went wrong. The payment hasn't done. Please try again."))}}]),a}(n.Component),F=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(J.a,{variant:"success"},r.a.createElement("p",{className:"mb-0"},"Thank you for your message. Our tour guides will reply you as soon as possible. Have a nice day!"))}}]),a}(n.Component),K=Object(b.withOktaAuth)(function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={authenticated:null,user:null,api:new v},n.checkAuthentication=n.checkAuthentication.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"checkAuthentication",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.authState.isAuthenticated;case 2:if((t=e.sent)===this.state.authenticated){e.next=15;break}if(!t){e.next=14;break}return e.next=7,this.props.authService.getUser();case 7:return a=e.sent,e.next=10,this.props.authService.getAccessToken();case 10:n=e.sent,this.setState({authenticated:t,user:a,api:new v(n)}),e.next=15;break;case 14:this.setState({authenticated:t,user:null,api:new v});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.checkAuthentication();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.checkAuthentication();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this.state.authenticated){e.next=2;break}return e.abrupt("return");case 2:this.props.authService.login("/");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.authService.logout("/");case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.authenticated,n=t.user,i=t.api;if(null===a)return null;var c=r.a.createElement(C,{isAuthenticated:a,login:this.login.bind(this),logout:this.logout.bind(this)});return r.a.createElement(f.g,null,r.a.createElement(b.SecureRoute,{path:"/",exact:!0,render:function(t){return r.a.createElement(w,Object.assign({},t,{login:e.login.bind(e),authenticated:a,user:n,api:i,navbar:c}))}}),r.a.createElement(b.SecureRoute,{path:"/guides",exact:!0,render:function(e){return r.a.createElement(L,Object.assign({},e,{authenticated:a,user:n,api:i,navbar:c}))}}),r.a.createElement(b.SecureRoute,{path:"/guides/add",exact:!0,render:function(e){return r.a.createElement(_,Object.assign({},e,{authenticated:a,user:n,api:i,navbar:c}))}}),r.a.createElement(b.SecureRoute,{path:"/guides/edit/:id",render:function(e){return r.a.createElement(D,Object.assign({},e,{authenticated:a,user:n,api:i,navbar:c}))}}),r.a.createElement(b.SecureRoute,{path:"/tour-inquiries",exact:!0,render:function(e){return r.a.createElement(G,Object.assign({},e,{authenticated:a,user:n,api:i,navbar:c}))}}),r.a.createElement(f.d,{path:"/booking",exact:!0,render:function(e){return r.a.createElement(z,Object.assign({},e,{authenticated:a,user:n,api:i,navbar:c}))}}),r.a.createElement(f.d,{path:"/success",exact:!0,render:function(e){return r.a.createElement(F,Object.assign({},e,{authenticated:a,user:n,api:i,navbar:c}))}}),r.a.createElement(b.SecureRoute,{path:"/tour-inquiries/edit/:id",exact:!0,render:function(e){return r.a.createElement(P,Object.assign({},e,{authenticated:a,user:n,api:i,navbar:c}))}}),r.a.createElement(b.SecureRoute,{path:"/payment-requests/:id",exact:!0,render:function(e){return r.a.createElement(N,Object.assign({},e,{authenticated:a,user:n,api:i}))}}),r.a.createElement(f.d,{path:"/payments/:inquiryId",exact:!0,render:function(e){return r.a.createElement(V,Object.assign({},e,{api:i}))}}),r.a.createElement(f.d,{path:"/process",exact:!0,render:function(e){return r.a.createElement(Y,e)}}),r.a.createElement(f.d,{path:"/cancel",exact:!0,render:function(e){return r.a.createElement(W,e)}}))}}]),a}(n.Component)),X=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(E.BrowserRouter,null,r.a.createElement(b.Security,{issuer:"https://dev-251206.okta.com/oauth2/default",clientId:"0oaengsigmP3OjAUL4x6",redirectUri:window.location.origin+"/callback",pkce:!0},r.a.createElement(f.d,{path:"/callback",component:b.LoginCallback}),r.a.createElement(K,null)))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[130,1,2]]]);
//# sourceMappingURL=main.fdb4b67a.chunk.js.map